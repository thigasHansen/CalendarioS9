<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Calendário 2025-2026</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; }
    select, input { margin: 5px; padding: 5px; }
    #calendario { margin-top: 20px; }
    object { width: 1000px; height: 700px; border: 1px solid #ccc; }
    .evento { font-size: 10px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Calendário Interativo</h1>

  <!-- Dropdowns -->
  <label for="ano">Ano:</label>
  <select id="ano" onchange="atualizarCalendario()">
    <option value="2025">2025</option>
    <option value="2026">2026</option>
  </select>

  <label for="mes">Mês:</label>
  <select id="mes" onchange="atualizarCalendario()">
    <option value="janeiro">Janeiro</option>
    <option value="fevereiro">Fevereiro</option>
    <option value="marco">Março</option>
    <option value="abril">Abril</option>
    <option value="maio">Maio</option>
    <option value="junho">Junho</option>
    <option value="julho">Julho</option>
    <option value="agosto">Agosto</option>
    <option value="setembro">Setembro</option>
    <option value="outubro">Outubro</option>
    <option value="novembro">Novembro</option>
    <option value="dezembro">Dezembro</option>
  </select>

  <!-- Formulário para adicionar eventos -->
  <h2>Adicionar Evento</h2>
  <input type="text" id="nomeEvento" placeholder="Nome do evento">
  <input type="date" id="dataEvento">
  <input type="color" id="corEvento" value="#FF5733">
  <button onclick="adicionarEvento()">Adicionar</button>

  <!-- Área do calendário -->
  <div id="calendario">
    <object id="svgCalendario" type="image/svg+xml" data="calendario_2025.svg"></object>
  </div>

  <script>
    const coresPorNome = {}; // garante cor consistente por nome

    function atualizarCalendario() {
      const ano = document.getElementById("ano").value;
      const obj = document.getElementById("svgCalendario");
      obj.data = "calendario_" + ano + ".svg";
    }

    function adicionarEvento() {
      const nome = document.getElementById("nomeEvento").value.trim();
      const data = document.getElementById("dataEvento").value;
      const corEscolhida = document.getElementById("corEvento").value;
      if (!nome || !data) { alert("Preencha nome e data!"); return; }

      // cor consistente por nome
      if (!coresPorNome[nome]) coresPorNome[nome] = corEscolhida;
      const cor = coresPorNome[nome];

      const obj = document.getElementById("svgCalendario");
      const svgDoc = obj.contentDocument;
      if (!svgDoc) return;

      const diaEl = svgDoc.getElementById("dia-" + data);
      if (!diaEl) { alert("Data não encontrada no calendário!"); return; }

      // criar texto do evento
      const eventoId = "evento-" + Date.now();
      const evento = svgDoc.createElementNS("http://www.w3.org/2000/svg","text");
      evento.setAttribute("id", eventoId);
      evento.setAttribute("x", parseInt(diaEl.getAttribute("x")) + 20);
      evento.setAttribute("y", parseInt(diaEl.getAttribute("y")) + 12);
      evento.setAttribute("fill", cor);
      evento.setAttribute("class","evento");
      evento.textContent = nome;

      // botão de remover
      const remover = svgDoc.createElementNS("http://www.w3.org/2000/svg","text");
      remover.setAttribute("x", parseInt(diaEl.getAttribute("x")) + 80);
      remover.setAttribute("y", parseInt(diaEl.getAttribute("y")) + 12);
      remover.setAttribute("fill","red");
      remover.setAttribute("class","evento");
      remover.textContent = "❌";
      remover.onclick = () => {
        evento.remove();
        remover.remove();
      };

      diaEl.parentNode.appendChild(evento);
      diaEl.parentNode.appendChild(remover);
    }

    // Inicializa
    atualizarCalendario();
  </script>
</body>
</html>
